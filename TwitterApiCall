#Call packages
pkgs <- c('twitteR','RJSONIO','bitops','RCurl','ROAuth','streamR')
lapply(pkgs, library, character.only=T)

# Set SSL certs globally
options(RCurlOptions = list(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl")))

#Access
reqURL <- "https://api.twitter.com/oauth/request_token"
accessURL <- "https://api.twitter.com/oauth/access_token"
authURL <- "https://api.twitter.com/oauth/authorize"
consumerKey <- "KEY"
consumerSecret <- "SECRET"
twitCred <- OAuthFactory$new(consumerKey=consumerKey,
                             consumerSecret=consumerSecret,
                             requestURL=reqURL,
                             accessURL=accessURL,
                             authURL=authURL)
#Log in
twitCred$handshake()

#Validate credentials
registerTwitterOAuth(twitCred)

#Search Tweets
tweets <- searchTwitter('Carloni OR Wilhite OR Gragnani',n=1000)

#Create data frame
tweetdf <- do.call("rbind",lapply(tweets,as.data.frame))

#OR Search Streaming API
filterStream(file.name = 'Tweets.json', track = 'Carloni,Wilhite,Gragnani', timeout = 60, oauth = twitCred)

#Convert JSON to R list
read <- readTweets('Tweets.json')

#Convert R list to data frame
TweetDF <- parseTweets('Tweets.json')

#Write data frame to CSV
write.csv(tweetdf,'Tweets.csv')
